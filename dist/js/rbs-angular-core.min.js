(function(){angular.module("rbs-angular-core",[]),angular.module("rbs-angular-core-samples",["rbs-angular-core"])}).call(this),function(){var t,n=[].slice;t=function(){function t(){}return t.andThen=function(){var e,r,o,c,a,u,i,s,l,p,f,h,g,m,d,y;for(y=arguments[0],m=arguments[1],d=3<=arguments.length?n.call(arguments,2):[],o=["$q"],c=void 0,u=void 0,a=2<=y.length?n.call(y,0,s=y.length-1):(s=0,[]),c=y[s++],i=2<=m.length?n.call(m,0,l=m.length-1):(l=0,[]),u=m[l++],e=i.indexOf("$delegate"),e>=0&&i.splice(e,1),p=0,h=a.length;h>p;p++)r=a[p],o.push(r);for(f=0,g=i.length;g>f;f++)r=i[f],o.push(r);return o.push(function(){var t,r,o,s,l;t=arguments[0],r=2<=arguments.length?n.call(arguments,1):[];try{return l=r.slice(0,a.length),t.when(c.apply(null,l)).then(function(t){var n;return n=r.slice(a.length,a.length+i.length),e>=0&&n.splice(e,0,t),u.apply(null,n)})}catch(s){return o=s,t.reject(o)}}),d.length>0?t.andThen.apply(t,[o].concat(n.call(d))):o},t}(),angular.module("rbs-angular-core").constant("Resolves",t)}.call(this),function(){var t,n,e=function(t,n){function e(){this.constructor=t}for(var o in n)r.call(n,o)&&(t[o]=n[o]);return e.prototype=n.prototype,t.prototype=new e,t.__super__=n.prototype,t},r={}.hasOwnProperty;t=function(t){function n(t,n,e){this.status=t,this.code=n,this.message=e}return e(n,t),n}(Error),n=function(){function n(){}return n.create=function(n,e,r){return new t(n,e,r)},n["throw"]=function(t,e,r){throw n.create(t,e,r)},n}(),angular.module("rbs-angular-core").constant("ErrorFactory",n)}.call(this),function(){var t=[].slice;angular.module("rbs-angular-core").service("Backoff",["$log","$q","$timeout",function(n,e,r){var o;return o=function(){function o(t,e,r,o,c){this.name=t,this.minBackoff=e,this.maxBackoff=r,this.randomFactor=o,this.task=c,n.debug("Creating "+this.name+":","minBackoff",this.minBackoff,"maxBackoff",this.maxBackoff,"randomFactor",this.randomFactor),this.$restartCount=0}return o.prototype.cancel=function(){var t;return n.debug(this.name+" cancelled."),angular.isFunction(null!=(t=this.$promise)?t.then:void 0)&&r.cancel(this.$promise),this.$promise=void 0},o.prototype.execute=function(){var e;return e=1<=arguments.length?t.call(arguments,0):[],n.debug(this.name+" executing.."),this.$execute.apply(this,e).then(function(n){return function(r){return n.$onSuccess.apply(n,[r].concat(t.call(e)))}}(this),function(n){return function(r){return n.$onFailure.apply(n,[r].concat(t.call(e)))}}(this))},o.prototype.$onSuccess=function(){var e,r;return r=arguments[0],e=2<=arguments.length?t.call(arguments,1):[],n.debug(this.name+" success."),this.$restartCount=0,r},o.prototype.$onFailure=function(){var e,o,c;return o=arguments[0],e=2<=arguments.length?t.call(arguments,1):[],c=1+Math.random()*this.randomFactor,this.$currentBackoff=Math.min(this.maxBackoff,this.minBackoff*Math.pow(2,this.$restartCount)*c),this.$restartCount+=1,n.error(this.name+" failure! Retry in "+this.$currentBackoff+".."),this.$promise=r(function(t){return function(){return t.execute.apply(t,e)}}(this),this.$currentBackoff,!0),this.$promise},o.prototype.$execute=function(){var r,o;return r=1<=arguments.length?t.call(arguments,0):[],this.lastOutcome=function(){var t;try{return e.when(this.task.apply(this,r))}catch(t){return o=t,n.error(o),e.reject(o)}}.call(this)},o}(),function(){var n;return n=1<=arguments.length?t.call(arguments,0):[],function(t,n,e){e.prototype=t.prototype;var r=new e,o=t.apply(r,n);return Object(o)===o?o:r}(o,n,function(){})}}]),angular.module("rbs-angular-core-samples").config(["ConfigurationProvider",function(t){return t.add("WS_URL","ws://example.org/events"),t.add("WS_MIN_BACKOFF",1e4),t.add("WS_MAX_BACKOFF",12e4)}]),angular.module("rbs-angular-core-samples").run(["$log","$q","$rootScope","$websocket","Backoff","Configuration",function(t,n,e,r,o,c){var a,u,i,s,l;return s=function(t){var n;return n=JSON.parse(t.data),e.$broadcast("ws-event",n)},i=c.WS_MIN_BACKOFF,u=c.WS_WS_MAX_BACKOFF,l=.2,a=o("Event stream WS",i,u,l,function(){var t,e;return t=n.defer(),e=r(WS_WS_URL+"/event?"),e.onMessage(s),e.onClose(function(n){return t.reject(n)}),t.promise}),a.execute()}])}.call(this),function(){angular.module("rbs-angular-core").service("ActionProgressSupport",["$log","$q",function(t,n){var e;return e=function(){function t(){}return t.prototype.startProgress=function(){return this.progress=!0},t.prototype.stopProgress=function(){return this.progress=!1},t}()}])}.call(this),function(){angular.module("rbs-angular-core").service("ActionMessagesSupport",["$log","$q",function(t,n){var e;return e=function(){function t(){}return t.prototype.resetMessages=function(){return this.messages=[]},t.prototype.addMessage=function(t,n){return(this.messages||this.resetMessages()).push({type:t,message:n})},t.prototype.addError=function(t){return this.addMessage("danger",t)},t.prototype.addSuccess=function(t){return this.addMessage("success",t)},t.prototype.addInfo=function(t){return this.addMessage("info",t)},t.prototype.addWarning=function(t){return this.addMessage("warning",t)},t.prototype.removeMessage=function(t){return this.messages.splice(t,1)},t}()}])}.call(this),function(){var t=[].slice;angular.module("rbs-angular-core").service("ActionCtrl",["$log","$q",function(n,e){var r;return r=function(){function r(t,n){this.modelName=t,this.actionName=n}return r.prototype.performValid=function(){var n,e,r;return r=arguments[0],n=arguments[1],e=3<=arguments.length?t.call(arguments,2):[],r.$valid?this.perform.apply(this,[n].concat(t.call(e))):this.onInvalid.apply(this,[r,n].concat(t.call(e)))},r.prototype.$toPromise=function(t){var n,r;try{return e.when(t())}catch(r){return n=r,e.reject(n)}},r.prototype.perform=function(){var n,r,o,c,a,u,i,s,l,p;return n=arguments[0],r=2<=arguments.length?t.call(arguments,1):[],l=function(e){return function(){return e.$toPromise(function(){return e.preProcess.apply(e,[n].concat(t.call(r)))})}}(this),o=function(n){return function(e){return n.$toPromise(function(){return n.execute.apply(n,[e].concat(t.call(r)))})}}(this),s=function(n){return function(e,o){return n.$toPromise(function(){return n.postProcess.apply(n,[e,o].concat(t.call(r)))})}}(this),a=function(n){return function(e,o){return n.$toPromise(function(){return n.onComplete.apply(n,[e,o].concat(t.call(r)))}).then(function(){return e})}}(this),c=function(n){return function(o,c){return n.$toPromise(function(){return n.onComplete.apply(n,[o,c].concat(t.call(r)))}).then(function(){return e.reject(o)})}}(this),i=function(n){return function(e,o){return n.$toPromise(function(){return n.onSuccess.apply(n,[e,o].concat(t.call(r)))})}}(this),u=function(n){return function(e,o){return n.$toPromise(function(){return n.onFailure.apply(n,[e,o].concat(t.call(r)))})}}(this),p=function(t){return o(t).then(function(n){return a(n,t)},function(n){return c(n,t)}).then(function(n){return s(n,t)}).then(function(n){return i(n,t)})["catch"](function(n){return u(n,t)})},l().then(p,function(t){return c(t,n).then(function(t){return i(t,n)},function(t){return u(t,n)})})},r.prototype.preProcess=function(){var e,r;return e=arguments[0],r=2<=arguments.length?t.call(arguments,1):[],n.debug.apply(n,["preProcess",this.actionName,this.modelName,e].concat(t.call(r))),e},r.prototype.execute=function(){var r,o;return r=arguments[0],o=2<=arguments.length?t.call(arguments,1):[],n.debug.apply(n,["execute",this.actionName,this.modelName,r].concat(t.call(o))),e.reject("Execute acttion not implemented!")},r.prototype.postProcess=function(){var e,r;return e=arguments[0],r=2<=arguments.length?t.call(arguments,1):[],n.debug.apply(n,["postProcess",this.actionName,this.modelName,e].concat(t.call(r))),e},r.prototype.onComplete=function(){var e,r,o;return o=arguments[0],e=arguments[1],r=3<=arguments.length?t.call(arguments,2):[],n.debug.apply(n,["onComplete",this.actionName,this.modelName,o,e].concat(t.call(r)))},r.prototype.onSuccess=function(){var e,r,o;return o=arguments[0],e=arguments[1],r=3<=arguments.length?t.call(arguments,2):[],n.debug.apply(n,["onSuccess",this.actionName,this.modelName,o,e].concat(t.call(r))),o},r.prototype.onFailure=function(){var r,o,c;return c=arguments[0],r=arguments[1],o=3<=arguments.length?t.call(arguments,2):[],n.error.apply(n,["onFailure",this.actionName,this.modelName,c,r].concat(t.call(o))),e.reject(c)},r.prototype.onInvalid=function(){var r,o,c;return c=arguments[0],r=arguments[1],o=3<=arguments.length?t.call(arguments,2):[],n.debug.apply(n,["onInvalid",this.actionName,this.modelName,c,r].concat(t.call(o))),e.reject(c)},r}()}])}.call(this),function(){var t,n;n={},t=function(){function t(){}return t.prototype.$get=function(){return n},t.prototype.get=function(t){return n[t]},t.prototype.add=function(t,e){var r;return r={},r[t]=e,angular.extend(n,r)},t.prototype.put=function(t,e){var r;return r={},r[t]=e,angular.merge(n,r)},t.prototype.set=function(t,n){return this.add(t,n)},t.prototype.merge=function(t,n){return this.put(t,n)},t}(),angular.module("rbs-angular-core").provider("Configuration",t)}.call(this);
//# sourceMappingURL=rbs-angular-core.min.js.map
